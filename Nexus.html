<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Spartans!</title>
    <style>
    .border{width: 100%;padding-top:5px;border-bottom: 3px solid #000000;position: absolute;}
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>
  <nav class="navbar is-fixed-top">
  <div class="navbar-brand" style="padding-left: 15px">
    <a class="navbar-item logo-top" href="/"><strong><img src="../images/sparta-logo-rectangle.png"></strong></a>
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarSPARTA">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span> 
    </a>
  </div>
  <div id="navbarSPARTA" class="navbar-menu">
		<div class="navbar-start">
    <a class="navbar-item" href="Home.html" class="pure-menu-link">Home</a>
    <div class="navbar-item">
      <a class="navbar-item" href="Nexus.html" class="pure-menu-link">Nexus</a>
    </div>
    <div class="navbar-start">
    <a class="navbar-item" href="Contact.html" class="pure-menu-link">Contact</a>
    <div class="navbar-start">
      <a class="navbar-item" href="https://www.sparta.eu/#SPARTA" target="_blank" class="pure-menu-link">Sparta</a>
      <!--<div class="navbar-item has-dropdown is-hoverable">
      </div>-->
    </div>    
    <div class="navbar-start">
      <a class="navbar-item" href="Logout.html" target="_blank" class="pure-menu-link">Log out</a>
    </div>
	</div></nav>

<script type="text/javascript">
    var token = document.cookie.substr(6);
    console.log(token);

		function getCapabilities(Url){
                var token = document.cookie.substr(6);
                $.ajax({
                        url: Url+'/getCapabilities',
                        dataType: "text",
                        contentType: "text/xml; charset=\"utf-8\"",
                        //headers: {'X-Auth-Token': token, 'Cache-Control':'no-cache'}, // Pide CORS
                        headers: {'X-Auth-Token': token, 'Accept-Encoding': '*/*'},
                        success:function(result){
						                  result = $.parseXML(result);

                              var resources = $(result).find('resources')
                              var base = $.trim(resources.attr('base'))
                              var resource = $(resources).find('resource')
                              var partner = $(resources).attr('name')

                              var iDiv_columns = document.getElementById('columns_'+partner)
                              var isnew = false
                              if(iDiv_columns == null) {
                                  var iDiv_columns = document.createElement('div');
                                iDiv_columns.id = 'columns_'+partner
                                  iDiv_columns.className="columns"
                                  iDiv_columns.style.marginTop = "10px"
                                  isnew=true
                                }
                              else{
                                    iDiv_columns.innerHTML=''
                                }

                              var iDiv = document.createElement('div');
                              iDiv.id = partner
                              iDiv.className="column is-one-fifth"
                              var iDiv_title = document.createElement('p');
                              iDiv_title.innerHTML += partner
                              iDiv_title.id = "div_title"
                              iDiv_title.className="title"
                              iDiv.appendChild(iDiv_title);
                              iDiv_columns.appendChild(iDiv);

                              var res = $(resources).find('method').find('result')

                              var iDiv = document.createElement('div');
                              iDiv.id = partner+"_textarea"
                              iDiv.className="column is-four-fifths"
                              var iP_title= document.createElement('p');
                                        iP_title.innerHTML  = "<b>Description:</b>"
                              iDiv.append(iP_title)
                              var serv = res.find('datainfo').find('Description')
                                                            $(serv).find('item').each(function(index2,element2){
                                                              var iP= document.createElement('p');
                                                                iP.textContent = $(element2).text()
                                          iDiv.append(iP)
                              })
                              var btc_getData = document.createElement('button');
                              btc_getData.id=partner+"_getData"
                              btc_getData.className="button is-link"
                              btc_getData.textContent="Data"
                              btc_getData.addEventListener("click", function(){getData(Url);})
                              iDiv.append(btc_getData)

                              var btc_getTools = document.createElement('button');
                              btc_getTools.id=partner+"_getApp"
                              btc_getTools.className="button is-link"
                              btc_getTools.textContent="Tools"
                              btc_getTools.style.marginLeft = "30px"; 
                              btc_getTools.addEventListener("click", function(){getTools(Url);})
                              iDiv.append(btc_getTools)

                              var btc_getService = document.createElement('button');
                              btc_getService.id=partner+"_getService"
                              btc_getService.className="button is-link"
                              btc_getService.textContent="Service"
                              btc_getService.style.marginLeft = "30px"; 
                              btc_getService.addEventListener("click", function(){getServices(Url);})
                              iDiv.append(btc_getService)

                              var btc_getInteraction = document.createElement('button');
                              btc_getInteraction.id=partner+"_getInteraction"
                              btc_getInteraction.className="button is-link"
                              btc_getInteraction.textContent="Interactive"
                              btc_getInteraction.style.marginLeft = "30px"; 
                              btc_getInteraction.addEventListener("click", function(){getInteraction(Url);})
                              iDiv.append(btc_getInteraction)

                              iDiv_columns.appendChild(iDiv);
                              if(isnew){
                                  document.getElementById('wadl_result').appendChild(iDiv_columns)
                                  var iDiv_line = document.createElement('div');
                                  iDiv_line.className="border"
                                  document.getElementById('wadl_result').appendChild(iDiv_line)
                              }
 						            }
                })
    }
    

    function getData(Url){
                $.ajax({
                        url: Url+'/getData',
                        dataType: "text",
                        contentType: "text/xml; charset=\"utf-8\"",
                        headers: {'X-Auth-Token': token, 'Accept-Encoding': '*/*'},
                        success:function(result){
                                result = $.parseXML(result);
                                var resources = $(result).find('resources')
                                var partner = $(resources).attr('name')
                                $(result).find('datainfo').each(function(index, element){
                                        var field = $(element)
                                        var upd = field.find('updated_date').text()
                                        var iDiv = document.getElementById(partner+'_textarea')
                                        iDiv.innerHTML=''
                                        var data = field.find('data')
                                        var iTable= document.createElement('table');
                                        var fields=["version","name","url","contact","info","description"];
                                        iTable.border=1
                                        var row= iTable.insertRow(0);
                                        for (i=0;i<fields.length; i++){
                                          var cell= row.insertCell(i)
                                          cell.innerHTML = "<b>"+fields[i]+"</b>";
                                }
                                $(data).find('item').each(function(index2,element2){
                                        var row= iTable.insertRow();
                                        for (i=0;i<fields.length; i++){
                                          var el =  $(element2).find(fields[i]).text();
                                          var cell= row.insertCell(i);
                                          if(i==2){
                                          	if(el.includes("http")){
                                          		cell.innerHTML="<a href="+el+" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else if(i==3){
                                          	if(el.includes("@")){
                                          		cell.innerHTML="<a href=\"mailto:"+el+"\" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else{
                                  		  	cell.innerHTML=el;
                                  		  }
                                  }})
                                iDiv.appendChild(iTable);
                                var iP_updated= document.createElement('p');
                                iP_updated.innerHTML  = "Last update: "+ upd;
                                iDiv.appendChild(iP_updated);
                                var btc_getDescription = document.createElement('button');
                                btc_getDescription.id=partner+"_getCapabilities"
                                btc_getDescription.className="button is-link"
                                btc_getDescription.textContent="Back"
                                btc_getDescription.addEventListener("click", function(){getCapabilities(Url);})
                                iDiv.append(btc_getDescription)
                })}})};


    function getTools(Url){
                $.ajax({
                        url: Url+'/getTools',
                        dataType: "text",
                        contentType: "text/xml; charset=\"utf-8\"",
                        headers: {'X-Auth-Token': token, 'Accept-Encoding': '*/*'},
                        success:function(result){
                                result = $.parseXML(result);
                                var resources = $(result).find('resources')
                                var partner = $(resources).attr('name')
                                $(result).find('datainfo').each(function(index, element){
                                        var field = $(element)
                                        var upd = field.find('updated_date').text()
                                        var iDiv = document.getElementById(partner+'_textarea')
                                        iDiv.innerHTML=''
                                        var data = field.find('data')
                                        var iTable= document.createElement('table');
                                        var fields=["version","name","url","contact","info","description"];
                                        iTable.border=1
                                        var row= iTable.insertRow(0);
                                        for (i=0;i<fields.length; i++){
                                          var cell= row.insertCell(i)
                                          cell.innerHTML = "<b>"+fields[i]+"</b>";
                                }
                                $(data).find('item').each(function(index2,element2){
                                        var row= iTable.insertRow();
                                        for (i=0;i<fields.length; i++){
                                          var el =  $(element2).find(fields[i]).text();
                                          var cell= row.insertCell(i);
                                          if(i==2){
                                          	if(el.includes("http")){
                                          		cell.innerHTML="<a href="+el+" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else if(i==3){
                                          	if(el.includes("@")){
                                          		cell.innerHTML="<a href=\"mailto:"+el+"\" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else{
                                  		  	cell.innerHTML=el;
                                  		  }
                                  }})
                                iDiv.appendChild(iTable);
                                var iP_updated= document.createElement('p');
                                iP_updated.innerHTML  = "Last update: "+ upd;
                                iDiv.appendChild(iP_updated);
                                var btc_getDescription = document.createElement('button');
                                btc_getDescription.id=partner+"_getCapabilities"
                                btc_getDescription.className="button is-link"
                                btc_getDescription.textContent="Back"
                                btc_getDescription.addEventListener("click", function(){getCapabilities(Url);})
                                iDiv.append(btc_getDescription)
                })}})};


    function getServices(Url){
                $.ajax({
                        url: Url+'/getServices',
                        dataType: "text",
                        contentType: "text/xml; charset=\"utf-8\"",
                        headers: {'X-Auth-Token': token, 'Accept-Encoding': '*/*'},
                        success:function(result){
                                result = $.parseXML(result);
                                var resources = $(result).find('resources')
                                var partner = $(resources).attr('name')
                                $(result).find('datainfo').each(function(index, element){
                                        var field = $(element)
                                        var upd = field.find('updated_date').text()
                                        var iDiv = document.getElementById(partner+'_textarea')
                                        iDiv.innerHTML=''
                                        var data = field.find('data')
                                        var iTable= document.createElement('table');
                                        var fields=["version","name","url","contact","info","description"];
                                        iTable.border=1
                                        var row= iTable.insertRow(0);
                                        for (i=0;i<fields.length; i++){
                                          var cell= row.insertCell(i)
                                          cell.innerHTML = "<b>"+fields[i]+"</b>";
                                }
                                $(data).find('item').each(function(index2,element2){
                                        var row= iTable.insertRow();
                                        for (i=0;i<fields.length; i++){
                                          var el =  $(element2).find(fields[i]).text();
                                          var cell= row.insertCell(i);
                                          if(i==2){
                                          	if(el.includes("http")){
                                          		cell.innerHTML="<a href="+el+" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else if(i==3){
                                          	if(el.includes("@")){
                                          		cell.innerHTML="<a href=\"mailto:"+el+"\" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else{
                                  		  	cell.innerHTML=el;
                                  		  }
                                  }})
                                iDiv.appendChild(iTable);
                                var iP_updated= document.createElement('p');
                                iP_updated.innerHTML  = "Last update: "+ upd;
                                iDiv.appendChild(iP_updated);
                                var btc_getDescription = document.createElement('button');
                                btc_getDescription.id=partner+"_getCapabilities"
                                btc_getDescription.className="button is-link"
                                btc_getDescription.textContent="Back"
                                btc_getDescription.addEventListener("click", function(){getCapabilities(Url);})
                                iDiv.append(btc_getDescription)
                })}})};


    function getInteraction(Url){
                $.ajax({
                        url: Url+'/getInteraction',
                        dataType: "text",
                        contentType: "text/xml; charset=\"utf-8\"",
                        headers: {'X-Auth-Token': token, 'Accept-Encoding': '*/*'},
                        success:function(result){
                                result = $.parseXML(result);
                                var resources = $(result).find('resources')
                                var partner = $(resources).attr('name')
                                $(result).find('datainfo').each(function(index, element){
                                        var field = $(element)
                                        var upd = field.find('updated_date').text()
                                        var iDiv = document.getElementById(partner+'_textarea')
                                        iDiv.innerHTML=''
                                        var data = field.find('data')
                                        var iTable= document.createElement('table');
                                        var fields=["version","name","url","contact","info","description"];
                                        iTable.border=1
                                        var row= iTable.insertRow(0);
                                        for (i=0;i<fields.length; i++){
                                          var cell= row.insertCell(i)
                                          cell.innerHTML = "<b>"+fields[i]+"</b>";
                                }
                                $(data).find('item').each(function(index2,element2){
                                        var row= iTable.insertRow();
                                        for (i=0;i<fields.length; i++){
                                          var el =  $(element2).find(fields[i]).text();
                                          var cell= row.insertCell(i);
                                          if(i==2){
                                          	if(el.includes("http")){
                                          		cell.innerHTML="<a href="+el+" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else if(i==3){
                                          	if(el.includes("@")){
                                          		cell.innerHTML="<a href=\"mailto:"+el+"\" target=\"_blank\">"+el+"</a>";
                                          	}
                                          	else{
                                          		cell.innerHTML=el;
                                          	}
                                  		  }
                                  		  else{
                                  		  	cell.innerHTML=el;
                                  		  }
                                  }})
                                iDiv.appendChild(iTable);
                                var iP_updated= document.createElement('p');
                                iP_updated.innerHTML  = "Last update: "+ upd;
                                iDiv.appendChild(iP_updated);
                                var btc_getDescription = document.createElement('button');
                                btc_getDescription.id=partner+"_getCapabilities"
                                btc_getDescription.className="button is-link"
                                btc_getDescription.textContent="Back"
                                btc_getDescription.addEventListener("click", function(){getCapabilities(Url);})
                                iDiv.append(btc_getDescription)
                })}})};

    //Url='https://10.200.10.11:5004'
    //Url_new='https://10.200.10.11:5005'
    Url = 'https://10.200.10.11:1029'
    Url_new =  Url
    window.onload = function() {
    	//getCapabilities(Url_new)
    	getCapabilities(Url)      
    } 
</script>

<div id="Workbench"><section class="section is-medium" style="background-color:#FFFFFF;">
  <div class="container">

  <div class="content" id="wadl_result">
  <h1 class="title is-spaced">Partners</h1>
</div>
<footer class="footer">
  <div class="content has-text-centered">
    <div class="columns is-centered">
      <div class="column is-narrow">
        <p class="image is-64x64"><img src="../images/eu-logo.jpg"></p>
      </div>
      <div class="column is-narrow is-size-7">
        <p>This project has received funding from the European Union's Horizon 2020 research and innovation programme under grant agreement No 830892.</p>
        <p>Made with open-source tech, including Jekyll, Bulma, and Font Awesome.</p>
        <p class="has-text-grey-light">Noticed a typo? Or something unclear? <a href="mailto:contact@sparta.eu" class="has-text-grey-light">Tell us</a>!</p>
      </div>
    </div>

  </div>
</footer>
  

</body></html>
